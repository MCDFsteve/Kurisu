<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kurisu 控制台输出</title>
</head>
<style>
    #ffmpegOutput {
    height: 100%;  /* 或根据需要调整高度 */
    overflow-x: hidden;
    overflow-y: scroll;  /* 强制显示滚动条 */
    white-space: pre-wrap;  /* 保持空白格式并自动换行 */
    background-color: #ffffff;
    color:#000000;
}
@media (prefers-color-scheme: dark) {
    #ffmpegOutput {
    color:#ffffff;
    background-color: rgb(22, 22, 22);
}
  }
  /* 设置滚动条的宽度和轨道颜色 */
::-webkit-scrollbar {
    width: 8px;
    /* 或任何您希望的宽度 */
    background-color: transparent;
    /* 滚动条轨道颜色 */
}

/* 设置滚动条滑块的颜色 */
::-webkit-scrollbar-thumb {
    background-color: rgba(40, 40, 40, 0.4);
    /* 滚动条滑块颜色 */
    border-radius: 6px;
    /* 如果需要，可以设置圆角 */
}

/* 设置当鼠标悬停在滚动条滑块上时的颜色 */
::-webkit-scrollbar-thumb:hover {
    background-color: rgba(80, 80, 80, 0.4);
    /* 滚动条滑块悬停颜色 */
}

@media (prefers-color-scheme: dark) {
    ::-webkit-scrollbar-thumb:hover {
        background-color: rgba(198, 198, 198, 0.4);
    }
}
@media (prefers-color-scheme: dark) {
    ::-webkit-scrollbar-thumb {
        background-color: rgba(134, 134, 134, 0.4);
    }
}
</style>
<body>
    <pre id="ffmpegOutput"></pre>
    <script>
        const { ipcRenderer } = require('electron');
        ipcRenderer.on('platform-info', (event, { isMac }) => {
    if (isMac) {
      const styleSheet = document.createElement('style');
      styleSheet.textContent = `
        #ffmpegOutput {
            background-color: initial !important;
        }
        @media (prefers-color-scheme: dark) {
            #ffmpegOutput {
            background-color: initial !important;
        }
    }
      `;
      document.head.appendChild(styleSheet);
    }
  });
        ipcRenderer.on('ffmpeg-output', (event, message) => {
            const outputElement = document.getElementById('ffmpegOutput');
            const atBottom = outputElement.scrollHeight - outputElement.clientHeight <= outputElement.scrollTop + 1;

            // 创建一个新的 div 来放置每条新的消息
            const messageElement = document.createElement('div');
            messageElement.textContent = message;
            outputElement.appendChild(messageElement);

            // 如果已经在底部，添加新内容后滚动到底部
            if (atBottom) {
                messageElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>
